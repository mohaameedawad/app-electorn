<div class="page-header">
  <button class="add-button" (click)="showDialog()">+ إضافة عميل</button>
</div>
<app-table [columns]="columns" [data]="data" (edit)="onEdit($event)" (delete)="onDelete($event)"></app-table>

<p-dialog 
  [(visible)]="visible" 
  [modal]="true" 
  [style]="{ width: '500px' }"
  [header]="editingCustomerId ? 'تعديل عميل' : 'إضافة عميل'"
  (onHide)="onDialogHide()"
>
  <div class="dialog-content">
    <div class="form-group">
      <label for="name">اسم العميل</label>
      <input 
        pInputText 
        id="name" 
        [(ngModel)]="newCustomer.name" 
        placeholder="أدخل اسم العميل"
        class="w-full"
      />
    </div>

    <div class="form-group">
      <label for="phone">رقم التليفون</label>
      <input 
        pInputText 
        id="phone" 
        [(ngModel)]="newCustomer.phone" 
        placeholder="01000000000"
        class="w-full"
        maxlength="11"
      />
      <span class="error-message" *ngIf="phoneError">{{ phoneError }}</span>
    </div>

    <div class="form-group">
      <label for="balanceType">نوع الرصيد</label>
      <p-select 
        id="balanceType"
        [(ngModel)]="newCustomer.balanceType"
        [options]="balanceTypes"
        optionLabel="label"
        optionValue="value"
        placeholder="اختر نوع الرصيد"
        class="w-full"
      ></p-select>
    </div>

    <div class="form-group">
      <label for="balanceAmount">المبلغ</label>
      <p-inputnumber 
        id="balanceAmount" 
        [(ngModel)]="newCustomer.balanceAmount"
        [showButtons]="true"
        placeholder="أدخل المبلغ"
        mode="decimal"
        [maxFractionDigits]="2"
        class="w-full"
      ></p-inputnumber>
    </div>
  </div>

  <div dialog-footer class="dialog-footer">
      <p-button 
        label="إلغاء" 
        severity="secondary" 
        (onClick)="closeDialog()"
        [text]="true">
      </p-button>
      <p-button 
        [label]="editingCustomerId ? 'تعديل' : 'حفظ'"
        (onClick)="saveCustomer()">
      </p-button>
    </div>
</p-dialog>

<app-confirmation-dialog></app-confirmation-dialog>
    