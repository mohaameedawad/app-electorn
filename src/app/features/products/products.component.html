<div class="page-header">
  <h2>المنتجات</h2>
  <button class="add-button" (click)="showDialog()">+ إضافة منتج</button>
</div>
<app-table 
  [columns]="columns" 
  [data]="products"
  (edit)="onEdit($event)"
  (delete)="onDelete($event)"
></app-table>

<app-confirmation-dialog></app-confirmation-dialog>

<p-dialog 
  [(visible)]="visible" 
  [modal]="true" 
  [style]="{width: '600px'}"
  [draggable]="false"
  [resizable]="false"
  (onHide)="onDialogHide()"
  [header]="editingProductId ? 'تعديل منتج' : 'إضافة منتج'">
  
  <div class="form-container">
    <div class="form-group">
      <label>اسم المنتج</label>
      <input 
        type="text" 
        pInputText
        class="full-width" 
        [(ngModel)]="newProduct.name"
        placeholder="أدخل اسم المنتج" />
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>سعر الشراء</label>
        <p-inputnumber 
          [(ngModel)]="newProduct.purchase_price"
          mode="decimal"
          locale="en-US"
          [minFractionDigits]="2"
          placeholder="0.00"
          [style]="{'width': '100%'}">
        </p-inputnumber>
      </div>

      <div class="form-group">
        <label>سعر البيع</label>
        <p-inputnumber 
          [(ngModel)]="newProduct.sale_price"
          mode="decimal"
          locale="en-US"
          [minFractionDigits]="2"
          placeholder="0.00"
          [style]="{'width': '100%'}">
        </p-inputnumber>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>المخزون</label>
        <p-inputnumber 
          [(ngModel)]="newProduct.stock"
          [showButtons]="true"
          [style]="{'width': '100%'}">
        </p-inputnumber>
      </div>

      <div class="form-group">
        <label>الفئة</label>
        <input 
          type="text" 
          pInputText
          class="full-width" 
          [(ngModel)]="newProduct.category"
          placeholder="الفئة" />
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <p-button 
        label="إلغاء" 
        severity="secondary" 
        (onClick)="closeDialog()"
        [text]="true">
      </p-button>
      <p-button 
        [label]="editingProductId ? 'تحديث' : 'حفظ'"
        (onClick)="saveProduct()">
      </p-button>
    </div>
  </ng-template>
</p-dialog>
