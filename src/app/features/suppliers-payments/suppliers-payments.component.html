<div class="page-header">
  <button class="add-button" (click)="showAddDialog()">
    <i class="pi pi-plus mx-2"></i>
    إضافة سند دفع
  </button>
</div>

<app-table
  [data]="payments"
  [columns]="columns"
  (edit)="editPayment($event)"
  (delete)="deletePayment($event)"
></app-table>

<app-dialog
  [(visible)]="displayDialog"
  [header]="isEditMode ? 'تعديل سند دفع' : 'إضافة سند دفع جديد'"
  [width]="'500px'"
>
  <div class="dialog-content p-4">
    <div class="mb-4">
      <label class="form-label">رقم السند</label>
      <input
        pInputText
        [value]="payment.receiptNumber"
        class="form-control"
        disabled
      />
    </div>

    <div class="mb-4">
      <label class="form-label">اسم المورد</label>
      <p-select
        [(ngModel)]="payment.supplierId"
        [options]="suppliers"
        optionLabel="name"
        optionValue="id"
        placeholder="اختر المورد"
        class="w-100"
      ></p-select>
    </div>

    <div class="mb-4">
      <label>التاريخ</label>
      <p-datepicker
        [(ngModel)]="payment.date"
        dateFormat="yy-mm-dd"
        [showIcon]="true"
        [appendTo]="'body'"
      ></p-datepicker>
    </div>

    <div class="mb-4">
      <label class="form-label">المبلغ</label>
      <p-inputnumber [(ngModel)]="payment.amount" class="w-100"></p-inputnumber>
    </div>
  </div>

  <div dialog-footer class="d-flex justify-content-end gap-2 p-3 border-top">
    <p-button
      label="إلغاء"
      severity="secondary"
      (onClick)="hideDialog()"
      [text]="true"
    ></p-button>
    <p-button label="حفظ" (onClick)="savePayment()"></p-button>
  </div>
</app-dialog>

<app-confirmation-dialog></app-confirmation-dialog>
