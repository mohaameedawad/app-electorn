<div class="page-header">
  <button class="add-button" (click)="showDialog()">+ ุฅุถุงูุฉ ููุฑุฏ</button>
</div>

<!-- ๐น ุฅุถุงูุฉ (edit) ู (delete) events -->
<app-table 
  [columns]="columns" 
  [data]="data"
  (edit)="onEdit($event)" 
  (delete)="onDelete($event)">
</app-table>

<!-- ๐น ุชุบููุฑ ูู app-dialog ุฅูู p-dialog -->
<p-dialog 
  [(visible)]="visible" 
  [modal]="true" 
  [style]="{ width: '500px', height: '700px' }"
  [header]="editingSupplierId ? 'ุชุนุฏูู ููุฑุฏ' : 'ุฅุถุงูุฉ ููุฑุฏ'"
  (onHide)="onDialogHide()"
  [resizable]="false"
  [draggable]="false"
>
  <div class="dialog-content p-4">
    <div class="form-group mb-3">
      <label for="name" class="form-label fw-semibold text-secondary">ุงุณู ุงูููุฑุฏ</label>
      <input 
        pInputText 
        id="name" 
        [(ngModel)]="newSupplier.name" 
        placeholder="ุฃุฏุฎู ุงุณู ุงูููุฑุฏ"
        class="w-full"
      />
    </div>

    <div class="form-group mb-3">
      <label for="phone" class="form-label fw-semibold text-secondary">ุฑูู ุงููุงุชู</label>
      <input 
        pInputText 
        id="phone" 
        [(ngModel)]="newSupplier.phone" 
        placeholder="01000000000"
        class="w-full"
        maxlength="11"
      />
      <span class="error-message text-danger" *ngIf="phoneError">{{ phoneError }}</span>
    </div>

    <div class="form-group mb-3">
      <label for="address" class="form-label fw-semibold text-secondary">ุงูุนููุงู</label>
      <input 
        pInputText 
        id="address" 
        [(ngModel)]="newSupplier.address" 
        placeholder="ุฃุฏุฎู ุงูุนููุงู"
        class="w-full"
      />
    </div>

    <div class="form-group mb-3">
      <label for="balanceType" class="form-label fw-semibold text-secondary">ููุน ุงูุฑุตูุฏ</label>
      <p-select 
        id="balanceType"
        [(ngModel)]="newSupplier.balanceType"
        [options]="balanceTypes"
        optionLabel="label"
        optionValue="value"
        placeholder="ุงุฎุชุฑ ููุน ุงูุฑุตูุฏ"
        class="w-full"
      ></p-select>
    </div>

    <div class="form-group mb-3">
      <label for="balanceAmount" class="form-label fw-semibold text-secondary">ุงููุจูุบ</label>
      <p-inputnumber 
        id="balanceAmount" 
        [(ngModel)]="newSupplier.balanceAmount"
        [showButtons]="true"
        placeholder="ุฃุฏุฎู ุงููุจูุบ"
        mode="decimal"
        [maxFractionDigits]="2"
        class="w-full"
      ></p-inputnumber>
    </div>
  </div>

  <div class="dialog-footer d-flex justify-content-end gap-2 p-3 border-top">
    <p-button 
      label="ุฅูุบุงุก" 
      severity="secondary" 
      (onClick)="closeDialog()"
      [text]="true">
    </p-button>
    <p-button 
      [label]="editingSupplierId ? 'ุชุญุฏูุซ' : 'ุญูุธ'"
      (onClick)="saveSupplier()">
    </p-button>
  </div>
</p-dialog>

<app-confirmation-dialog #confirmDialog></app-confirmation-dialog>