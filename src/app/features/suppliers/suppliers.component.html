<div class="page-header">
  <button class="add-button" (click)="showDialog()">+ إضافة مورد</button>
</div>
<app-table [columns]="columns" [data]="data"></app-table>

<app-dialog 
  [(visible)]="visible"
  [header]="'إضافة مورد'"
  [width]="'600px'">
  
  <div dialog-content class="p-4">
    <div class="mb-3">
      <label class="form-label fw-semibold text-secondary">اسم المورد</label>
      <input 
        type="text" 
        pInputText 
        [(ngModel)]="newSupplier.name"
        placeholder="أدخل اسم المورد"
        class="w-100" />
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold text-secondary">رقم الهاتف</label>
      <input 
        type="text" 
        pInputText 
        [(ngModel)]="newSupplier.phone"
        placeholder="01000000000"
        maxlength="11"
        class="w-100" />
      <span class="error-message" *ngIf="phoneError">{{ phoneError }}</span>
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold text-secondary">العنوان</label>
      <input 
        type="text" 
        pInputText 
        [(ngModel)]="newSupplier.address"
        placeholder="أدخل العنوان"
        class="w-100" />
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold text-secondary">نوع الرصيد</label>
      <p-select 
        [(ngModel)]="newSupplier.balanceType"
        [options]="balanceTypes"
        optionLabel="label"
        optionValue="value"
        placeholder="اختر نوع الرصيد"
        [style]="{'width': '100%'}">
      </p-select>
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold text-secondary">المبلغ</label>
      <p-inputnumber 
        [(ngModel)]="newSupplier.balanceAmount"
        mode="decimal"
        [showButtons]="true"
        placeholder="أدخل المبلغ"
        [maxFractionDigits]="2"
        [style]="{'width': '100%'}">
      </p-inputnumber>
    </div>
  </div>

  <div dialog-footer class="d-flex justify-content-end gap-2 p-3 border-top">
    <p-button 
      label="إلغاء" 
      severity="secondary" 
      (onClick)="closeDialog()"
      [text]="true">
    </p-button>
    <p-button 
      label="حفظ" 
      (onClick)="saveSupplier()">
    </p-button>
  </div>
</app-dialog>
